(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{125:function(e,r,t){"use strict";t.r(r),t.d(r,"frontMatter",(function(){return i})),t.d(r,"metadata",(function(){return o})),t.d(r,"rightToc",(function(){return s})),t.d(r,"default",(function(){return p}));var n=t(2),a=t(6),c=(t(0),t(137)),i={id:"process",title:"The Scraping Process",sidebar_title:"Scraping Process"},o={id:"scraping/process",title:"The Scraping Process",description:"Consider the database starts empty...",source:"@site/docs/scraping/process.md",permalink:"/dependencies-hub/docs/scraping/process",editUrl:"https://github.com/gioragutt/dependencies-hub/edit/master/docs/docs/scraping/process.md",sidebar:"docs",previous:{title:"Scraping Artifactory",permalink:"/dependencies-hub/docs/scraping/artifactory"},next:{title:"Style Guide",permalink:"/dependencies-hub/docs/styleguide"}},s=[{value:"Triggers",id:"triggers",children:[]},{value:"Scrape Scope",id:"scrape-scope",children:[{value:"Single Commit Scrape",id:"single-commit-scrape",children:[]},{value:"Full Scrape",id:"full-scrape",children:[]}]},{value:"Flow of a scrape",id:"flow-of-a-scrape",children:[]}],l={rightToc:s};function p(e){var r=e.components,t=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},l,t,{components:r,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Consider the database starts empty..."),Object(c.b)("p",null,"What triggers are there to populate the database, and what data is scraped for each trigger?"),Object(c.b)("h2",{id:"triggers"},"Triggers"),Object(c.b)("p",null,"First, there are git triggers:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Pushes (to master branch)"),Object(c.b)("li",{parentName:"ul"},"Tags (library/service releases)")),Object(c.b)("p",null,"Further more, there can be any number of triggers we create, such as:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Cron Jobs (nightly scrapes, etc)"),Object(c.b)("li",{parentName:"ul"},"Manually scrape a certain branch on user request, etc.")),Object(c.b)("h2",{id:"scrape-scope"},"Scrape Scope"),Object(c.b)("p",null,"Each of the triggers described above may collect different amounts of data."),Object(c.b)("p",null,"There could be a full scrape, that would scrape all repositories, and in every repository it would scrape all tags, and so on."),Object(c.b)("p",null,"On the other hand, there could be smaller scrapes that scrape a single branch/tag."),Object(c.b)("p",null,"Summerizing, it seems that there are two types of scrapes:"),Object(c.b)("h3",{id:"single-commit-scrape"},"Single Commit Scrape"),Object(c.b)("p",null,"A scrape that spans just one commit, be it a branch or a tag. It will insert the ",Object(c.b)("inlineCode",{parentName:"p"},"LibraryVersion/ServiceVersion"),"s of scraped modules, and any ",Object(c.b)("inlineCode",{parentName:"p"},":DEPENDS_ON")," relationships related to that version."),Object(c.b)("p",null,"Except for the master branch scrape, which will override previous data, commit scrapes should be idempotent: when run several times, there should be no duplicate date in the database."),Object(c.b)("h3",{id:"full-scrape"},"Full Scrape"),Object(c.b)("p",null,"Scrape all repositories, and within those, all tags, and the master branch (unless configured otherwise)."),Object(c.b)("p",null,"This can be triggered nightly, or even more frequently, depending on how lengthy the process will be."),Object(c.b)("p",null,"Basically it means running the ",Object(c.b)("inlineCode",{parentName:"p"},"Single Commit Scrape")," for many many commits."),Object(c.b)("h2",{id:"flow-of-a-scrape"},"Flow of a scrape"))}p.isMDXComponent=!0},137:function(e,r,t){"use strict";t.d(r,"a",(function(){return u})),t.d(r,"b",(function(){return h}));var n=t(0),a=t.n(n);function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){c(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)t=c[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)t=c[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=a.a.createContext({}),p=function(e){var r=a.a.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},u=function(e){var r=p(e.components);return a.a.createElement(l.Provider,{value:r},e.children)},b={inlineCode:"code",wrapper:function(e){var r=e.children;return a.a.createElement(a.a.Fragment,{},r)}},d=a.a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,c=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=p(t),d=n,h=u["".concat(i,".").concat(d)]||u[d]||b[d]||c;return t?a.a.createElement(h,o(o({ref:r},l),{},{components:t})):a.a.createElement(h,o({ref:r},l))}));function h(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var c=t.length,i=new Array(c);i[0]=d;var o={};for(var s in r)hasOwnProperty.call(r,s)&&(o[s]=r[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,i[1]=o;for(var l=2;l<c;l++)i[l]=t[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);